CREATE OR REPLACE NONEDITIONABLE TRIGGER InsertionModeles
BEFORE INSERT ON Modeles FOR EACH ROW
DECLARE 
        v_numCat Categories.numCat%TYPE;

BEGIN
    IF :NEW.modele IS NULL OR :NEW.marque IS NULL OR :NEW.numCat IS NULL THEN
        RAISE_APPLICATION_ERROR(-20001,'Les parametre ne doit pas etre null');
    END IF;

    SELECT numCat INTO v_numCat FROM Categories WHERE numCat = :NEW.numCat;


EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RAISE_APPLICATION_ERROR(-20002,'La catÃ©gorie n''existe pas');
    WHEN OTHERS THEN
        RAISE_APPLICATION_ERROR(-20003,'Erreur Oracle : ' || SQLCODE || ' ; Message Oracle : ' || SQLERRM);
END;
